<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cannavan Delivery App</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.20.1/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.20.1/mapbox-gl.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- AUTH SECTION -->
    <div class="auth-container" id="auth-section">
      <h1>üåø Cannavan Delivery</h1>
      <video autoplay muted loop class="login-gif">
        <source src="images/tfggckfklrk11.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>

      <!-- Login Form -->
      <form id="loginForm" class="form active">
        <h2>Login</h2>
        <input type="text" id="loginUsername" placeholder="Username" required />
        <div class="password-wrapper">
          <input
            type="password"
            id="loginPassword"
            placeholder="Password"
            required
          />
          <button type="button" onclick="togglePassword('loginPassword')">
            üëÅ
          </button>
        </div>
        <button type="submit">Login</button>
        <p>
          Not a member?
          <a href="#" onclick="switchForm('signupForm')">Sign Up</a>
        </p>
      </form>

      <!-- Signup Form -->
      <form id="signupForm" class="form hidden">
        <h2>Sign Up</h2>
        <input type="text" id="fullName" placeholder="Full Name" required />
        <input type="text" id="idNumber" placeholder="ID Number" required />
        <input type="date" id="dob" required />
        <input type="email" id="email" placeholder="Email Address" required />
        <input type="text" id="address" placeholder="Address" required />
        <input type="file" id="profilePic" accept="image/*" />
        <input
          type="text"
          id="signupUsername"
          placeholder="Username"
          required
        />
        <div class="password-wrapper">
          <input
            type="password"
            id="signupPassword"
            placeholder="Password"
            required
          />
          <button type="button" onclick="togglePassword('signupPassword')">
            üëÅ
          </button>
        </div>
        <div class="password-wrapper">
          <input
            type="password"
            id="confirmPassword"
            placeholder="Confirm Password"
            required
          />
          <button type="button" onclick="togglePassword('confirmPassword')">
            üëÅ
          </button>
        </div>
        <button type="submit">Sign Up</button>
        <p>
          Already a member?
          <a href="#" onclick="switchForm('loginForm')">Login</a>
        </p>
      </form>
    </div>

    <!-- APP SECTION -->
    <div class="section-container hidden" id="app-section">
      <!-- HEADER -->
      <header class="app-header">
        <div class="user-actions">
          <button id="profile-btn">‚öôÔ∏è Settings</button>
          <button onclick="logout()">Logout</button>
        </div>
        <h1>Welcome, <span id="user-name"></span></h1>
      </header>

      <!-- DELIVERY TRACKING -->
      <section id="delivery-section">
        <h2>Your Delivery</h2>
        <p id="order-status">No active order</p>
        <div
          id="map"
          style="height: 200px; border-radius: 8px; margin: 10px 0"
        ></div>
        <button onclick="simulateOrder()">Order Product</button>
      </section>

      <!-- PRODUCTS GRID -->
      <section class="categories-grid">
        <div
          class="category-card"
          onclick="openProductModal('Northern Lights', 12)"
        >
          <img src="images/indica.jpg" alt="Indica" />
          <h2>Indica</h2>
        </div>
        <div
          class="category-card"
          onclick="openProductModal('Sour Diesel', 13)"
        >
          <img src="images/sativa.jpg" alt="Sativa" />
          <h2>Sativa</h2>
        </div>
        <div
          class="category-card"
          onclick="openProductModal('Girl Scout Cookies', 16)"
        >
          <img src="images/hybrid.jpg" alt="Hybrid" />
          <h2>Hybrid</h2>
        </div>
        <div class="category-card" onclick="openProductModal('CBD Oil', 25)">
          <img src="images/CBD-oils.jpg" alt="CBD" />
          <h2>CBD</h2>
        </div>
      </section>

      <!-- CART -->
      <section id="cart-section" class="hidden"></section>
    </div>

    <!-- PROFILE MODAL -->
    <div class="modal" id="profile-modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('profile-modal')">&times;</span>
        <h2>Edit Profile</h2>
        <img id="profile-img" src="" alt="Profile Picture" />
        <input type="text" id="edit-fullName" placeholder="Full Name" />
        <input type="text" id="edit-idNumber" placeholder="ID Number" />
        <input type="date" id="edit-dob" />
        <input type="email" id="edit-email" placeholder="Email" />
        <input type="text" id="edit-address" placeholder="Address" />
        <input type="file" id="edit-pic" accept="image/*" />
        <button onclick="saveProfile()">Save Profile</button>
      </div>
    </div>

    <!-- PRODUCT MODAL -->
    <div class="modal" id="product-modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('product-modal')">&times;</span>
        <h2 id="product-name"></h2>
        <p>Price per unit: $<span id="product-price"></span></p>
        <label>Quantity:</label>
        <input type="number" id="product-qty" min="1" value="1" />
        <p>Total: $<span id="product-total"></span></p>
        <button onclick="addProductToCart()">Add to Cart</button>
      </div>
    </div>

    <!-- External JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.20.1/mapbox-gl.js"></script>
    <script src="script.js"></script>
  </body>
</html>
